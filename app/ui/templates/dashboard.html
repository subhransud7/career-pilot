{% extends "base.html" %}
{% block content %}
<h3>Dashboard</h3>
<div class="row g-3 mb-4">
  <div class="col-md-3"><div class="card p-3"><small>Total Leads</small><h4>{{ total_leads }}</h4></div></div>
  <div class="col-md-3"><div class="card p-3"><small>Visited Links</small><h4>{{ total_visited }}</h4></div></div>
  <div class="col-md-3"><div class="card p-3"><small>Session Status</small><h6>SequentialProcessor</h6></div></div>
  <div class="col-md-3"><div class="card p-3"><small>Gmail Status</small><h6>{{ gmail_status }}</h6></div></div>
</div>

<div class="row g-4">
  <div class="col-md-6">
    <div class="card p-3">
      <h5>Run Search</h5>
      <form hx-post="/run-search" hx-target="#run-result" hx-swap="innerHTML">
        <label class="form-label">Keywords</label>
        <input class="form-control mb-2" name="keywords" required />
        <label class="form-label">Last N Days</label>
        <input class="form-control mb-2" type="number" name="days" value="2" min="1" required />
        <label class="form-label">Max Results</label>
        <input class="form-control mb-3" type="number" name="max_results" value="10" min="1" />
        <button class="btn btn-primary">Run</button>
        <span class="htmx-indicator ms-2">Running...</span>
      </form>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card p-3">
      <h5>Upload CSV</h5>
      <form hx-post="/upload-csv" hx-target="#run-result" hx-swap="innerHTML" enctype="multipart/form-data">
        <input type="file" class="form-control mb-3" name="file" accept=".csv" required />
        <button class="btn btn-outline-primary">Upload</button>
        <span class="htmx-indicator ms-2">Processing...</span>
      </form>
    </div>
  </div>
</div>

<div id="run-result" class="mt-4"></div>
{% endblock %}
